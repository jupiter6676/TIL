# 1. 모델링

> 데이터베이스의 구조나 형식으로, 모델 구조만 보고 어떤 데이터를 다루는지 알 수 있다.

- 개념적 데이터 모델링
  - 데이터의 요구사항을 찾고 분석하는 과정
  - 핵심 개체(Entity) 사이의 관계를 찾아내고 표현
- 논리적 데이터 모델링
  - 데이터베이스 설계 프로세스의 과정
  - 정보의 논리적인 구조와 규칙을 명확하게 표현하는 기법/과정
- 물리적 데이터 모델링
  - 논리적 데이터 모델이 데이터 저장소로서 어떻게 실제로 저장될 것인가



## (1) 개체 관계 모델

> Entity Relation Diagram (ERD)

- 주요 용어
  - 엔터티(Entity): 업무가 관여하는 정보
  - 속성(Attribute): 엔터티가 가지는 성격, 데이터 타입과 크기 및 제약사항 지정
  - 관계(Relation): 엔터티 간의 관계, 연관성



- 관계
  - 카디널리티(Cardinality): 수적 관계
    - 1:1 관계: A는 B를 하나 가진다. B는 A를 하나 가진다.
    - 1:N 관계: A는 B를 여러 개 가진다. B는 A의 하나에 해당한다.
    - M:N 관계: A는 B를 여러 개 가진다. B는 A를 여러 개 가진다.
  - 옵셔널리티(Optionality)
    - (1) 필수
    - (0) 선택



- Crow's feet

  ![crowsfeet](Assets/34_DB_(6).assets/crowsfeet.png)



## (2) 다양한 ERD

![erd](Assets/34_DB_(6).assets/erd.png)



![sqlite-sample-database](Assets/34_DB_(6).assets/sqlite-sample-database.jpg)



![ERD.drawio](Assets/34_DB_(6).assets/ERD.drawio.png)



![ERD--2.drawio](Assets/34_DB_(6).assets/ERD--2.drawio.png)



# 2. 정규화

> 테이블을 쪼개는 과정

- 데이터베이스 테이블을 설계하는 과정에서 **중복성을 제거**하여 성능을 향상
- 하지만 너무 많은 정규화는 탐색할 때 JOIN이나 서브쿼리를 많이 사용하게 한다.
- 역정규화
  - 생성/관리를 용이하게 할 것인가?
  - 탐색을 빨리 할 것인가?




- 제1정규화
  - 도메인 원자값
  - 한 속성에 여러 개의 속성이 포함되어 있거나, 같은 유형의 속성이 여러 개로 나눠져 있는 경우, 그걸 제거
- 제2정규화
  - 부분적 함수 종속성 제거
  - PK가 아닌 모든 칼럼은 PK에 종속되도록 구성
- 제3정규화
  - 이행적 함수 종속성 제거 (X → Y, Y → Z)
  - 일반 속성 간의 함수 종속 관계가 존재하지 않아야 한다.



## (1) 제1정규화

- 이렇게 생긴 테이블

  |        제목        |     장르     |   가수    | 데뷔연도 |
  | :----------------: | :----------: | :-------: | :------: |
  |    여름의 낮잠     | 인디밴드, 락 | Dear Bear |   2020   |
  |     봄이 좋아      | 인디밴드, 팝 |   10cm    |   2010   |
  | 방에 모기가 있어요 | 인디밴드, 락 |   10cm    |   2010   |

  

- album

  |        제목        |   가수    | 데뷔연도 |
  | :----------------: | :-------: | :------: |
  |    여름의 낮잠     | Dear Bear |   2020   |
  |     봄이 좋아      |   10cm    |   2010   |
  | 방에 모기가 있어요 |   10cm    |   2010   |

- genre

  |   장르   |
  | :------: |
  | 인디밴드 |
  |    팝    |
  |    락    |

- genre_album

  |    제목     | 장르     |
  | :---------: | -------- |
  | 여름의 낮잠 | 인디밴드 |
  | 여름의 낮잠 | 락       |



## (2) 제2정규화

- 이렇게 생긴 테이블

- 제목이 고유한 값을 가진 PK라고 했을 때, 나머지 칼럼의 값들이 이 PK에 종속되어야 하는데, 이 경우는 그러지 못한다.

- 문제가 되는 가격과 유형을 별도로 관리해야 한다.

  | 제목        | 가수      | 데뷔연도 | 가격 | 유형 |
  | ----------- | --------- | -------- | ---- | ---- |
  | 여름의 낮잠 | Dear Bear | 2020     | 3000 | MP3  |
  | 여름의 낮잠 | Dear Bear | 2020     | 100  | DRM  |
  | 봄이 좋아   | 10cm      | 2010     | 3000 | MP3  |
  | 봄이 좋아   | 10cm      | 2010     | 100  | DRM  |



- album

  |    제목     |   가수    | 데뷔연도 |
  | :---------: | :-------: | :------: |
  | 여름의 낮잠 | Dear Bear |   2020   |
  |  봄이 좋아  |   10cm    |   2010   |

- pricing

  |    제목     | 가격 | 유형 |
  | :---------: | :--: | :--: |
  | 여름의 낮잠 | 3000 | MP3  |
  | 여름의 낮잠 | 100  | DRM  |
  |  봄이 좋아  | 3000 | MP3  |
  |  봄이 좋아  | 100  | DRM  |



## (3) 제3정규화

- 이렇게 생긴 테이블

- 제목은 두 가지인데, 가수가 같아. 가수가 같으면 데뷔연도가 같을 수밖에 없다.

- 제목에 의해 가수가 결정되고, 가수에 의해 데뷔연도가 결정되는 것을 **이행성 함수 종속성**이라고 한다.

  |        제목        |   가수    | 데뷔연도 |
  | :----------------: | :-------: | :------: |
  |    여름의 낮잠     | Dear Bear |   2020   |
  |     봄이 좋아      |   10cm    |   2010   |
  | 방에 모기가 있어요 |   10cm    |   2010   |



- album

  |        제목        |   가수    |
  | :----------------: | :-------: |
  |    여름의 낮잠     | Dear Bear |
  |     봄이 좋아      |   10cm    |
  | 방에 모기가 있어요 |   10cm    |

- artist

  |   가수    | 데뷔연도 |
  | :-------: | :------: |
  | Dear Bear |   2020   |
  |   10cm    |   2010   |



# 3. 실습 (정답 X)

![syllaverse](Assets/34_DB_(6).assets/syllaverse.png)

![LMS](Assets/34_DB_(6).assets/LMS.png)
